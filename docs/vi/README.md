<p align="right">
  <a href="../../README.md">English</a> | <b>Tiếng Việt</b>
</p>

# King Translator AI - Công Cụ Dịch Thuật AI Đa Năng 🔥

![Version](https://img.shields.io/badge/version-5.3-blue?style=for-the-badge)
![Status](https://img.shields.io/badge/status-active-green?style=for-the-badge)
![License](https://img.shields.io/badge/license-GPL--3.0-orange?style=for-the-badge)
[![Discord](https://img.shields.io/discord/1206126615848554526?style=for-the-badge&logo=discord&label=Discord)](https://discord.gg/8DTwr8QpsM)

<div align="center">
  <img src="https://raw.githubusercontent.com/king1x32/King-Translator-AI/refs/heads/main/icon/kings.jpg" alt="Logo King Translator AI" width="200"/>
  <br>
  <i>Dịch mọi thứ với sức mạnh từ 6 nhà cung cấp AI hàng đầu, ngay trên trình duyệt của bạn!</i>
  <h3>Nếu bạn thích userscript này, hãy cho kho lưu trữ này một sao nhé! ✨</h3>
</div>

## 📖 Mục Lục
- [Có Gì Mới ở Phiên bản 5.0?](#-có-gì-mới-ở-phiên-bản-50)
- [Giới thiệu](#-giới-thiệu)
- [Tính Năng Chính](#-tính-năng-chính)
- [Ảnh Chụp Màn Hình](#-ảnh-chụp-màn-hình)
- [Hướng Dẫn Cài Đặt](#-hướng-dẫn-cài-đặt)
- [Hướng Dẫn Sử Dụng](#-hướng-dẫn-sử-dụng)
- [Phím Tắt & Cử Chỉ](#-phím-tắt--cử-chỉ)
- [Hỗ trợ & Đóng góp](#-hỗ-trợ--đóng-góp)
- [Giấy phép](#-giấy-phép)
- [English Guide](README.md)

## 🚀 Có Gì Mới ở Phiên bản 5.0?

Phiên bản 5.0 là một bản cập nhật lớn, tập trung vào việc mở rộng khả năng, tối ưu hóa hiệu suất và nâng cao trải nghiệm người dùng:

- 🧠 **Hỗ Trợ Đa Nền Tảng AI:** Tích hợp 6 nhà cung cấp AI hàng đầu: **Gemini, Claude, Perplexity, OpenAI, Mistral, Deepseek và Ollama**.
  - **Gemini:** Hỗ trợ đầy đủ tất cả tính năng, bao gồm dịch file lớn.
  - **Claude, Perplexity, OpenAI, Mistral:** Hỗ trợ tất cả tính năng trừ dịch file.
  - **Deepseek, Ollama:** Hỗ trợ các tính năng liên quan đến văn bản và dịch live-caption YouTube.
- 🗣️ **Text-to-Speech (TTS) Đa Dạng:** Thêm 5 nguồn TTS mới (Gemini, OpenAI, Google Cloud, Google Translate) cùng với TTS của thiết bị, với khả năng tùy chỉnh giọng nói, tốc độ, và cao độ.
- 📂 **Dịch File & Media Nâng Cao:** Dịch nhiều định dạng file local và URL. Hỗ trợ tài liệu (`PDF`, `DOCX`, `HTML`, `SRT`), media (`MP4`, `MP3`, `WAV`), và file lớn lên đến 2GB qua API Gemini.
- 🚀 **Tối Ưu Hóa API & Hiệu Suất:** Cải thiện cơ chế quản lý API key, giảm thiểu tình trạng rate-limit, dịch trang nhanh và ổn định hơn.
- 🎨 **Dịch Manga Web Nâng Cấp:**
  -  Vị trí dịch chính xác hơn, hỗ trợ di chuyển và thay đổi kích thước các bong bóng thoại một cách linh hoạt.
  -  Sau khi tuỳ chỉnh vị trí như drag hay resize thì có thể reset về vị trí ban đầu khi nhấn đúp ở trong khung đó.
  -  Điều chỉnh độ trong suốt: di con trỏ qua bong bóng thoại, giữ phím `Ctrl` và **lăn con lăn chuột** để thay đổi độ trong suốt của nền.
- 🖼️ **Nâng Cấp OCR:** Tính năng "Dịch vùng OCR" được cải tiến thành "Chụp và Dịch Vùng Màn Hình" mạnh mẽ và tiện lợi hơn.
- 🔒 **Bảo Mật Nâng Cao:** File sao lưu cài đặt giờ đây được mã hóa để bảo vệ API key của bạn.
- ✍️ **Cải Tiến Dịch Khi Viết:** Thêm khả năng di chuyển và lưu lại vị trí của công cụ dịch theo từng trang web.
- ⚙️ **Giao Diện & Trải Nghiệm:**
  - Thiết kế lại popup dịch đẹp hơn, hiện đại hơn, bổ sung nút sao chép nhanh.
  - Thêm nút bật/tắt tổng cho toàn bộ công cụ dịch.
- ✅ **Sửa Lỗi & Tăng Cường Độ Ổn Định:** Giải quyết các vấn đề đã được báo cáo từ phiên bản trước.

## 🌟 Giới thiệu
**King Translator AI** là một userscript mạnh mẽ, biến trình duyệt của bạn thành một công cụ dịch thuật toàn năng. Bằng cách tích hợp các mô hình AI tiên tiến nhất, script cho phép bạn phá vỡ mọi rào cản ngôn ngữ, từ dịch văn bản đơn giản đến phân tích video phức tạp, tất cả chỉ với vài cú nhấp chuột.

## ✨ Tính Năng Chính

<details>
<summary><b>🧠 Dịch Thuật Đa Nền Tảng AI</b></summary>

- Lựa chọn linh hoạt giữa 6 nhà cung cấp AI hàng đầu: **Google Gemini, Anthropic Claude, Perplexity, OpenAI, Mistral, Deepseek và Ollama**.
- Tận dụng điểm mạnh của từng mô hình cho các tác vụ dịch thuật khác nhau.
- Quản lý API key thông minh, tự động xoay vòng để tối ưu hiệu suất và tránh rate-limit.
</details>

<details>
<summary><b>📝 Dịch Văn Bản Thông Minh</b></summary>

- **Dịch Nhanh:** Dịch ngay lập tức khi bôi đen văn bản.
- **Dịch Popup:** Giao diện popup hiện đại, hiển thị bản gốc, phiên âm (IPA/Pinyin) và bản dịch.
- **Dịch Nâng Cao:** Phân tích từ vựng và ngữ cảnh sâu hơn.
- **Dịch Khi Viết:** Tự động dịch văn bản trong các ô nhập liệu (input, textarea).
- **Dịch Toàn Trang:** Dịch toàn bộ nội dung trang web, có thể tùy chỉnh loại trừ các thành phần không cần dịch.
- **Dịch Live-Caption YouTube:** Dịch phụ đề video YouTube theo thời gian thực, hỗ trợ hiển thị song ngữ.
</details>

<details>
<summary><b>🖼️ Dịch Hình Ảnh (OCR) & Manga</b></summary>

- **Chụp và Dịch Vùng Màn Hình:** Kéo chuột để chọn và dịch bất kỳ nội dung nào trên màn hình.
- **Dịch Ảnh Trên Web:** Click vào bất kỳ hình ảnh nào trên trang web để dịch nội dung bên trong.
- **Dịch File Ảnh:** Tải lên file ảnh từ máy tính của bạn để dịch.
- **Dịch Manga Chuyên Biệt:** Tự động nhận diện và dịch các bong bóng thoại trong truyện tranh, cho phép di chuyển và thay đổi kích thước bản dịch.
</details>

<details>
<summary><b>🎵 Dịch Media & File (Lên đến 2GB)</b></summary>

- **Dịch File Audio/Video:** Tải lên các file media (MP3, MP4, WAV, WEBM...) để nhận bản ghi và bản dịch.
- **Hỗ Trợ File Lớn (Gemini API):** Dịch các file tài liệu, media lên đến 2GB.
- **Dịch Trực Tiếp Từ URL (Gemini):** Dán link file để dịch mà không cần tải về.
- **Dịch Tài Liệu:** Hỗ trợ dịch các file PDF, HTML, SRT, VTT, JSON, MD...
</details>

<details>
<summary><b>⚙️ Tùy Chỉnh Toàn Diện</b></summary>

- **Tùy Chỉnh Prompt:** Toàn quyền thay đổi các câu lệnh (prompt) gửi đến AI cho từng tác vụ dịch thuật.
- **Giao Diện:** Chế độ Sáng/Tối, tùy chỉnh kích thước font chữ, độ rộng popup.
- **Chế Độ Hiển Thị:** Lựa chọn giữa "Chỉ bản dịch", "Song ngữ" và "Học ngôn ngữ" (gốc + phiên âm + dịch).
- **Phím Tắt & Cử Chỉ:** Thiết lập phóm tắt và cử chỉ cảm ứng (mobile) theo thói quen sử dụng.
- **Quản Lý Cache:** Bật/tắt và tùy chỉnh cache để tăng tốc độ cho các lần dịch sau.
- **Sao Lưu & Phục Hồi:** Dễ dàng xuất/nhập toàn bộ cài đặt với file đã được mã hóa.
</details>

## 📸 Ảnh Chụp Màn Hình

<details>
<summary><b>📱 Giao diện trên Mobile</b></summary>
<div style="display: flex; flex-wrap: wrap; justify-content: space-around;">
  <img src="https://i.imgur.com/7pi9USr.jpeg" width="45%" alt="Mobile 1" />
  <img src="https://i.imgur.com/3ksRC8R.jpeg" width="45%" alt="Mobile 2" />
  <img src="https://i.imgur.com/Wu5jXLv.jpeg" width="45%" alt="Mobile 3" />
  <img src="https://i.imgur.com/Bcy8QIu.jpeg" width="45%" alt="Mobile 4" />
</div>
</details>

<details>
<summary><b>💻 Giao diện trên PC</b></summary>
<div style="display: flex; flex-wrap: wrap; justify-content: space-around;">
  <img src="https://i.imgur.com/tZ5NqOG.jpeg" width="45%" alt="PC 1" />
  <img src="https://i.imgur.com/esxZv9N.jpeg" width="45%" alt="PC 2" />
  <img src="https://i.imgur.com/4tTFvZW.jpeg" width="45%" alt="PC 3" />
  <img src="https://i.imgur.com/gIExWnd.jpeg" width="45%" alt="PC 4" />
</div>
</details>

## 🔧 Hướng Dẫn Cài Đặt

### Bước 1: Cài Đặt Trình Quản Lý Userscript
Bạn cần một trình quản lý userscript. **Violentmonkey** được khuyên dùng.

- **Firefox:** Cài đặt [Violentmonkey](https://addons.mozilla.org/vi/firefox/addon/violentmonkey/) hoặc [Tampermonkey](https://addons.mozilla.org/vi/firefox/addon/tampermonkey/).
- **Chrome:** Cài đặt [Violentmonkey](https://chromewebstore.google.com/detail/violentmonkey/jinjaccalgkegednnccohejagnlnfdag) hoặc [Tampermonkey](https://chromewebstore.google.com/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo).
- **Safari:** Sử dụng ứng dụng [Tampermonkey](https://www.tampermonkey.net/index.php?browser=safari) hoặc [Userscripts](https://apps.apple.com/us/app/userscripts/id1463298887).

### Bước 2: Cài Đặt Script King Translator AI

<p align="center">
  <i>Cài đặt phiên bản mới nhất từ GitHub:</i>
  <br><br>
  <a href="https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/KingTranslatorAI.user.js" style="text-decoration:none;">
    <img src="https://img.shields.io/badge/Phiên_bản_nén-Nhanh_&_Nhẹ-blueviolet?style=for-the-badge&logo=github" alt="GitHub Compressed Version">
  </a>
     
  <a href="https://raw.githubusercontent.com/king1x32/King-Translator-AI/refs/heads/main/King-Translator-AI.user.js" style="text-decoration:none;">
    <img src="https://img.shields.io/badge/Phiên_bản_thường-Mã_nguồn-blue?style=for-the-badge&logo=github" alt="GitHub Normal Version">
  </a>
</p>

<p align="center">
  <i>Cài đặt phiên bản mới nhất từ GreasyFork:</i>
  <br><br>
  <a href="https://greasyfork.org/vi/scripts/529348-king-translator-ai" style="text-decoration:none;">
    <img src="https://img.shields.io/badge/GreasyFork-Mã_nguồn-bluegray?style=for-the-badge" alt="Greasy Fork">
  </a>
</p>

### Bước 3: Lấy & Cấu Hình API Key
1. **Lấy API Key:**
   - **Gemini (Khuyên dùng):** Truy cập [Google AI Studio](https://aistudio.google.com/app/apikey) -> `Create API Key`.
   - Các nhà cung cấp khác: Truy cập trang chủ của họ để lấy API key (Claude, OpenAI, Perplexity, Mistral).
2. **Cấu Hình Script:**
   - Mở cài đặt script:
      - Phím tắt `Alt + S` (Windows, Linux, Android)
      - Phím tắt `Cmd + S` (IOS, IpadOS, MacOS)
      - Menu nhỏ của Violentmonkey.
      - Chọn '⚙️' (ở góc dưới bên phải màn hình lướt web) > Cài đặt King AI
   - Trong phần `API PROVIDER`, chọn nhà cung cấp bạn muốn dùng.
   - Dán API key vào ô tương ứng. **Lưu ý:** Để dịch trang và dịch live-caption mượt mà, nên thêm nhiều key (từ 3-5 key) để tránh bị giới hạn.
   - Nhấn **Lưu**.

## 📚 Hướng Dẫn Sử Dụng

<details>
<summary><b>📝 Dịch văn bản (Bôi đen)</b></summary>

1. Dùng chuột bôi đen một đoạn văn bản.
2. Một nút dịch nhỏ sẽ xuất hiện.
3. **Thao tác trên nút dịch:**
   - **Click đơn:** Dịch popup (mặc định).
   - **Click đúp:** Dịch nhanh (hiển thị ngay bên dưới).
   - **Giữ click:** Dịch nâng cao (phân tích sâu hơn).
   (Bạn có thể thay đổi các hành động này trong cài đặt)
</details>

<details>
<summary><b>✍️ Dịch Khi Viết</b></summary>

- Tự động xuất hiện một công cụ nhỏ khi bạn gõ văn bản vào các ô nhập liệu (khung chat, bình luận, v.v.).
- Dịch nhanh nội dung đang viết sang ngôn ngữ đích (nút 🌐) hoặc dịch ngược lại sang ngôn ngữ nguồn (nút 🔄).
- Sử dụng phím tắt `Alt + T` để dịch nhanh.
- **(Mới ở v5.0)** Có thể di chuyển và tự động lưu vị trí của công cụ trên mỗi trang web khác nhau.
</details>

<details>
<summary><b>🖼️ Dịch hình ảnh & manga</b></summary>

- **Dịch vùng màn hình:**
  1. Mở menu Tools (nút ⚙️ ở góc dưới bên phải) -> `Dịch Vùng OCR`.
  2. Kéo chuột để chọn vùng màn hình bạn muốn dịch.
- **Dịch ảnh trên web:**
  1. Mở menu Tools -> `Dịch Ảnh Web`.
  2. Di chuột qua các ảnh, ảnh được chọn sẽ có viền xanh.
  3. Click vào ảnh để bắt đầu dịch.
- **Dịch manga:**
  1. Mở menu Tools -> `Dịch Manga Web`.
  2. Click vào ảnh truyện tranh.
  3. Script sẽ tự động nhận diện và dịch các bong bóng thoại.
    - Bạn có thể di chuyển hoặc thay đổi kích thước các ô dịch.
    - Sau khi tuỳ chỉnh vị trí như drag hay resize thì có thể reset về vị trí ban đầu khi nhấn đúp ở trong ô dịch đó.
    - Bạn có thể chỉnh độ trong suốt của nền ô dịch khi để con trỏ ở trong khung cần chỉnh và giữ Ctrl+lăn con lăn chuột.
</details>

<details>
<summary><b>🎵 Dịch live-caption YouTube</b></summary>

1. Mở một video YouTube có phụ đề.
2. Nút dịch hình logo của script sẽ xuất hiện ở thanh điều khiển video.
3. Nhấp vào nút đó để bật/tắt dịch phụ đề theo thời gian thực.
</details>

<details>
<summary><b>📂 Dịch file</b></summary>

- **Dịch File Thường (Xử lý trên máy):**
  1. Mở menu Tools -> `Dịch File`.
  2. Chọn một tệp từ máy tính của bạn.
  3. Tệp đã dịch sẽ được tự động tải về.
  - **Định dạng hỗ trợ:** `PDF`, `HTML`, `SRT`, `VTT`, `JSON`, `MD` (Markdown), `TXT`.

- **Dịch File VIP (Qua API - Khuyên dùng Gemini):**
  1. Mở menu Tools -> `Dịch VIP`.
  2. Chọn tải lên một tệp hoặc dán một đường dẫn URL.
  3. Bản dịch sẽ được hiển thị trong popup. Tính năng này hỗ trợ file lên tới 2GB.
  - **Định dạng tài liệu hỗ trợ:** `PDF`, `DOCX`, `PPTX`, `XLSX`, `CSV`, và nhiều hơn nữa.
  - **Định dạng media hỗ trợ:** Tất cả các định dạng ảnh (`JPG`, `PNG`, `WEBP`), âm thanh (`MP3`, `WAV`, `M4A`), và video (`MP4`, `WEBM`, `MOV`) phổ biến.
</details>

## ⌨️ Phím Tắt & Cử Chỉ

| Thao Tác | Phím Tắt (Windows/Linux) | Phím Tắt (macOS) | Cử chỉ (Mobile) |
|---|---|---|---|
| **Mở Cài Đặt** | `Alt` + `S` | `Cmd` + `S` | Chạm 4 ngón tay |
| **Dịch Toàn Trang** | `Alt` + `F` | `Cmd` + `F` | - |
| **Dịch nhanh** (bôi đen) | `Alt` + `Q` | `Cmd` + `Q` | - |
| **Dịch popup** (bôi đen) | `Alt` + `E` | `Cmd` + `E` | Chạm 2 ngón tay |
| **Dịch nâng cao** (bôi đen) | `Alt` + `A` | `Cmd` + `A` | Chạm 3 ngón tay |
| **Dịch trong ô nhập liệu** | `Alt` + `T` | `Cmd` + `T` | - |
| **Bật/Tắt Tools dịch** | - | - | Chạm 5 ngón tay |

## 🤝 Hỗ Trợ & Đóng Góp

- **Báo cáo lỗi & Đề xuất tính năng:** Vui lòng tạo một [Issue trên GitHub](https://github.com/king1x32/King-Translator-AI/issues).
- **Thảo luận & Hỗ trợ:** Tham gia [Server Discord](https://discord.gg/8DTwr8QpsM) của cộng đồng.
- **Đóng góp mã nguồn:** Fork dự án và tạo một Pull Request. Mọi đóng góp đều được hoan nghênh!

### ❤️ Ủng hộ tác giả
Nếu bạn thấy script này hữu ích, hãy xem xét ủng hộ mình một ly cà phê để mình có thêm động lực phát triển.

- **Patreon:** [patreon.com/king1x32](https://www.patreon.com/c/king1x32/membership)
- **Trang ủng hộ:** [kingsmanvn.pages.dev](https://kingsmanvn.pages.dev/)

## 📄 Giấy Phép
Dự án này được phát hành dưới Giấy phép Công cộng GNU v3.0. Xem file `LICENSE` để biết thêm chi tiết.

---

<div align="center">
  Được tạo ra với ❤️ bởi King1x32
  <br>
  <a href="https://facebook.com/king1x32">Facebook</a> •
  <a href="https://t.me/king1x32">Telegram</a>
</div>
